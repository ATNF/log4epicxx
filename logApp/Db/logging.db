#! Generated by VisualDCT v2.6
#! DBDSTART
#! DBD("../../install/dbd/logging.dbd")
#! DBDEND


# refresh list of loggers after short delay
# to ensure all loggers initialised
record(seq, "$(logprefix)startupDelay") {
  field(DESC, "update loggers after delay")
  field(PINI, "YES")
  field(DLY1, "10")
  field(DOL1, "1")
  field(LNK1, "$(logprefix)update.PROC")
}

# subroutine record used to set logging levels
# processed on change of log:LoggerLevels
record(aSub, "$(logprefix)setLevels") {
  field(DESC, "update loggers with new levels")
  field(SNAM, "log4epicxx_set_log_levels")
  field(FTA, "STRING")
  field(FTB, "LONG")
  field(INPA, "$(logprefix)loggerNames")
  field(INPB, "$(logprefix)loggerLevels")
  field(FLNK, "$(logprefix)update")
  field(NOA, "50")
  field(NOB, "50")
}

# list of logger names
record(waveform, "$(logprefix)loggerNames") {
  field(DESC, "current loggers")
  field(NELM, "50")
  field(FTVL, "STRING")
}


# list of current logigng levels (as string) corresponding to list of names
record(waveform, "$(logprefix)loggerLevelNames") {
  field(DESC, "current level name of active loggers")
  field(FTVL, "STRING")
  field(NELM, "50")
}

# list of current logging levels (as number) corresponding to list of names
record(waveform, "$(logprefix)loggerLevels") {
  field(DESC, "current level of active loggers")
  field(FTVL, "LONG")
  field(NELM, "50")
  field(FLNK, "$(logprefix)setLevels")
}

# updates logger name & level lists records
record(aSub, "$(logprefix)update") {
  field(DESC, "gets active logger names and levels")
  field(SNAM, "log4epicxx_get_loggers")
  field(PINI, "YES")
  field(OUTA, "$(logprefix)loggerNames PP")
  field(OUTB, "$(logprefix)loggerLevelNames PP")
  field(OUTC, "$(logprefix)loggerLevels PP")
  field(FTVA, "STRING")
  field(FTVB, "STRING")
  field(NOVA, "50")
  field(FTVC, "LONG")
  field(NOVB, "50")
  field(NOVC, "50")
}

#! Further lines contain data used by VisualDCT
#! View(0,0,1.0)
#! Record("$(logprefix)startupDelay",120,354,0,1,"$(logprefix)startupDelay")
#! Field("$(logprefix)startupDelay.LNK1",16777215,0,"$(logprefix)startupDelay.LNK1")
#! Link("$(logprefix)startupDelay.LNK1","$(logprefix)update.PROC")
#! Record("$(logprefix)setLevels",400,359,0,1,"$(logprefix)setLevels")
#! Field("$(logprefix)setLevels.INPA",16777215,1,"$(logprefix)setLevels.INPA")
#! Link("$(logprefix)setLevels.INPA","$(logprefix)loggerNames.VAL")
#! Field("$(logprefix)setLevels.INPB",16777215,1,"$(logprefix)setLevels.INPB")
#! Link("$(logprefix)setLevels.INPB","$(logprefix)loggerLevels.VAL")
#! Field("$(logprefix)setLevels.FLNK",16777215,0,"$(logprefix)setLevels.FLNK")
#! Link("$(logprefix)setLevels.FLNK","$(logprefix)update")
#! Record("$(logprefix)loggerLevels",760,308,0,0,"$(logprefix)loggerLevels")
#! Field("$(logprefix)loggerLevels.VAL",16777215,0,"$(logprefix)loggerLevels.VAL")
#! Field("$(logprefix)loggerLevels.FLNK",16777215,0,"$(logprefix)loggerLevels.FLNK")
#! Link("$(logprefix)loggerLevels.FLNK","$(logprefix)setLevels")
#! Record("$(logprefix)loggerLevelNames",760,162,0,0,"$(logprefix)loggerLevelNames")
#! Field("$(logprefix)loggerLevelNames.VAL",16777215,0,"$(logprefix)loggerLevelNames.VAL")
#! Record("$(logprefix)loggerNames",700,22,0,0,"$(logprefix)loggerNames")
#! Field("$(logprefix)loggerNames.VAL",16777215,0,"$(logprefix)loggerNames.VAL")
#! Record("$(logprefix)update",120,17,0,1,"$(logprefix)update")
#! Field("$(logprefix)update.OUTA",16777215,1,"$(logprefix)update.OUTA")
#! Link("$(logprefix)update.OUTA","$(logprefix)loggerNames.VAL")
#! Field("$(logprefix)update.OUTB",16777215,1,"$(logprefix)update.OUTB")
#! Link("$(logprefix)update.OUTB","$(logprefix)loggerLevelNames.VAL")
#! Field("$(logprefix)update.OUTC",16777215,1,"$(logprefix)update.OUTC")
#! Link("$(logprefix)update.OUTC","$(logprefix)loggerLevels.VAL")
#! Field("$(logprefix)update.PROC",16777215,0,"$(logprefix)update.PROC")
