#! Generated by VisualDCT v2.6
#! DBDSTART
#! DBD("../../install/dbd/logging.dbd")
#! DBDEND


# refresh list of loggers after short delay
# to ensure all loggers initialised
record(seq, "$(prefix)$(antid)$(ss)log:startupDelay") {
  field(DESC, "update loggers after delay")
  field(PINI, "YES")
  field(DLY1, "10")
  field(DOL1, "1")
  field(LNK1, "$(prefix)$(antid)$(ss)log:update.PROC")
}

# subroutine record used to set logging levels
# processed on change of log:LoggerLevels
record(aSub, "$(prefix)$(antid)$(ss)log:setLevels") {
  field(DESC, "update loggers with new levels")
  field(SNAM, "logging_set_log_levels")
  field(FTA, "STRING")
  field(FTB, "LONG")
  field(INPA, "$(prefix)$(antid)$(ss)log:loggerNames")
  field(INPB, "$(prefix)$(antid)$(ss)log:loggerLevels")
  field(FLNK, "$(prefix)$(antid)$(ss)log:update")
  field(NOA, "50")
  field(NOB, "50")
}

# list of logger names
record(waveform, "$(prefix)$(antid)$(ss)log:loggerNames") {
  field(DESC, "current loggers")
  field(NELM, "50")
  field(FTVL, "STRING")
}


# list of current logigng levels (as string) corresponding to list of names
record(waveform, "$(prefix)$(antid)$(ss)log:loggerLevelNames") {
  field(DESC, "current level name of active loggers")
  field(FTVL, "STRING")
  field(NELM, "50")
}

# list of current logging levels (as number) corresponding to list of names
record(waveform, "$(prefix)$(antid)$(ss)log:loggerLevels") {
  field(DESC, "current level of active loggers")
  field(FTVL, "LONG")
  field(NELM, "50")
  field(FLNK, "$(prefix)$(antid)$(ss)log:setLevels")
}

# updates logger name & level lists records
record(aSub, "$(prefix)$(antid)$(ss)log:update") {
  field(DESC, "gets active logger names and levels")
  field(SNAM, "logging_get_loggers")
  field(PINI, "YES")
  field(OUTA, "$(prefix)$(antid)$(ss)log:loggerNames PP")
  field(OUTB, "$(prefix)$(antid)$(ss)log:loggerLevelNames PP")
  field(OUTC, "$(prefix)$(antid)$(ss)log:loggerLevels PP")
  field(FTVA, "STRING")
  field(FTVB, "STRING")
  field(NOVA, "50")
  field(FTVC, "LONG")
  field(NOVB, "50")
  field(NOVC, "50")
}

#! Further lines contain data used by VisualDCT
#! View(0,0,1.0)
#! Record("$(prefix)$(antid)$(ss)log:startupDelay",120,354,0,1,"$(prefix)$(antid)$(ss)log:startupDelay")
#! Field("$(prefix)$(antid)$(ss)log:startupDelay.LNK1",16777215,0,"$(prefix)$(antid)$(ss)log:startupDelay.LNK1")
#! Link("$(prefix)$(antid)$(ss)log:startupDelay.LNK1","$(prefix)$(antid)$(ss)log:update.PROC")
#! Record("$(prefix)$(antid)$(ss)log:setLevels",400,359,0,1,"$(prefix)$(antid)$(ss)log:setLevels")
#! Field("$(prefix)$(antid)$(ss)log:setLevels.INPA",16777215,1,"$(prefix)$(antid)$(ss)log:setLevels.INPA")
#! Link("$(prefix)$(antid)$(ss)log:setLevels.INPA","$(prefix)$(antid)$(ss)log:loggerNames.VAL")
#! Field("$(prefix)$(antid)$(ss)log:setLevels.INPB",16777215,1,"$(prefix)$(antid)$(ss)log:setLevels.INPB")
#! Link("$(prefix)$(antid)$(ss)log:setLevels.INPB","$(prefix)$(antid)$(ss)log:loggerLevels.VAL")
#! Field("$(prefix)$(antid)$(ss)log:setLevels.FLNK",16777215,0,"$(prefix)$(antid)$(ss)log:setLevels.FLNK")
#! Link("$(prefix)$(antid)$(ss)log:setLevels.FLNK","$(prefix)$(antid)$(ss)log:update")
#! Record("$(prefix)$(antid)$(ss)log:loggerLevels",760,308,0,0,"$(prefix)$(antid)$(ss)log:loggerLevels")
#! Field("$(prefix)$(antid)$(ss)log:loggerLevels.VAL",16777215,0,"$(prefix)$(antid)$(ss)log:loggerLevels.VAL")
#! Field("$(prefix)$(antid)$(ss)log:loggerLevels.FLNK",16777215,0,"$(prefix)$(antid)$(ss)log:loggerLevels.FLNK")
#! Link("$(prefix)$(antid)$(ss)log:loggerLevels.FLNK","$(prefix)$(antid)$(ss)log:setLevels")
#! Record("$(prefix)$(antid)$(ss)log:loggerLevelNames",760,162,0,0,"$(prefix)$(antid)$(ss)log:loggerLevelNames")
#! Field("$(prefix)$(antid)$(ss)log:loggerLevelNames.VAL",16777215,0,"$(prefix)$(antid)$(ss)log:loggerLevelNames.VAL")
#! Record("$(prefix)$(antid)$(ss)log:loggerNames",700,22,0,0,"$(prefix)$(antid)$(ss)log:loggerNames")
#! Field("$(prefix)$(antid)$(ss)log:loggerNames.VAL",16777215,0,"$(prefix)$(antid)$(ss)log:loggerNames.VAL")
#! Record("$(prefix)$(antid)$(ss)log:update",120,17,0,1,"$(prefix)$(antid)$(ss)log:update")
#! Field("$(prefix)$(antid)$(ss)log:update.OUTA",16777215,1,"$(prefix)$(antid)$(ss)log:update.OUTA")
#! Link("$(prefix)$(antid)$(ss)log:update.OUTA","$(prefix)$(antid)$(ss)log:loggerNames.VAL")
#! Field("$(prefix)$(antid)$(ss)log:update.OUTB",16777215,1,"$(prefix)$(antid)$(ss)log:update.OUTB")
#! Link("$(prefix)$(antid)$(ss)log:update.OUTB","$(prefix)$(antid)$(ss)log:loggerLevelNames.VAL")
#! Field("$(prefix)$(antid)$(ss)log:update.OUTC",16777215,1,"$(prefix)$(antid)$(ss)log:update.OUTC")
#! Link("$(prefix)$(antid)$(ss)log:update.OUTC","$(prefix)$(antid)$(ss)log:loggerLevels.VAL")
#! Field("$(prefix)$(antid)$(ss)log:update.PROC",16777215,0,"$(prefix)$(antid)$(ss)log:update.PROC")
